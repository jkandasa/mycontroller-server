---
id: task-1
name: abc task
enabled: true
ignoreDuplicate: true
autoDisable: false
variables:
  variableA: sf:mysensor.1.1.V_VOLUME.payload.value
  variableB: sf:mysensor.13.1.V_STATUS
  variableC: gw:mysensor.enabled
  variableE: tp:{{ now.Format "2006-01-02" }} # go lang template
  email_to: abc@gmail.com
  email_subject: Current water level {{ .variableA}}
  email_body: >
    Hi,
      
      There is an alarm triggered at {{ now.Format "2006-01-02"}}.
      Current Water level {{ .variableA }}
      Motor status {{ with .variableB.payload }}{{ .value }}{{ end }}
    
    Thanks,
    MyController.org
dampening:
  type: none
triggerOnEvent: true
eventFilter:
  selectors:
    labels.ms_node_id: '1'
    labels.ms_sensor_id: '1'
    labels.ms_type_string: V_VOLUME
  topics:
    - sensor_field/set
    - sensor_field/request
executionInterval: 1m
remoteCall: false
remoteCallConfig: {}
rule:
  matchAll: true
  conditions:
    - { variable: variableB.payload.value, operation: eq, value: false }
    - { variable: variableA, operation: gt, value: 10 }
    - { variable: variableA, operation: rangeNotIn, value: [10,12] }
notify:
  - email_handler